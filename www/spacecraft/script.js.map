{"version":3,"sources":["src/t3d.ts","src/sfx.ts","src/Game/Enemy.ts","src/Game/Event.ts","src/Game/Hero.ts","src/Game/Map.ts","src/Game/Menu.ts","src/Game/Platform.ts","src/Game/Scene.ts","src/Game/Task.ts","src/Game/Token.ts","src/script.ts"],"names":[],"mappings":"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C1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAC1B,GAAG,GAAW,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,IAAI,GAAG;gBACR,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG;gBAC7C,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAA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","file":"script.js","sourcesContent":["/**\n * Tiny 3D library\n */\nnamespace T3D {\n\n    /**\n     * Radiant scale\n     */\n    export const RAD_SCALE = Math.PI / 180;\n    \n    /**\n     * Vector 3 math\n     */\n    export class Vec3 {\n\n        x: number = 0;\n        y: number = 0;\n        z: number = 0;\n\n        constructor(x?: number, y?: number, z?:number) {\n            this.set(x, y, z);\n        }\n\n        set(vec?: Vec3): Vec3;\n        set(x?: number, y?: number, z?: number): Vec3;\n        set(xOrVec?: any, y?: number, z?: number): Vec3 {\n            if (xOrVec instanceof Vec3) {\n                this.x = xOrVec.x;\n                this.y = xOrVec.y;\n                this.z = xOrVec.z;\n                return this;\n            }\n            if (typeof xOrVec == 'number') {\n                this.x = xOrVec;\n            }\n            if (typeof y == 'number') {\n                this.y = y;\n            }\n            if (typeof z == 'number') {\n                this.z = z;\n            }\n            return this;\n        }\n\n        max(): number {\n            return Math.max(this.x, this.y, this.z);\n        }\n\n        add(vec: Vec3): Vec3 {\n            this.x += vec.x;\n            this.y += vec.y;\n            this.z += vec.z;\n            return this;\n        }\n\n        sub(vec: Vec3): Vec3 {\n            this.x -= vec.x;\n            this.y -= vec.y;\n            this.z -= vec.z;\n            return this;\n        }\n\n        distance(vec: Vec3): number {\n            return Math.sqrt(\n                (this.x - vec.x) * (this.x - vec.x) +\n                (this.y - vec.y) * (this.y - vec.y) +\n                (this.z - vec.z) * (this.z - vec.z)\n            );\n        }\n\n        dot(vec: Vec3): number {\n            return this.x * vec.x + this.y * vec.y + this.z * vec.z;\n        }\n\n        cross(vec: Vec3): Vec3 {\n            let x = this.x;\n            let y = this.y;\n            let z = this.z;\n            let vx = vec.x;\n            let vy = vec.y;\n            let vz = vec.z;\n            this.x = y * vz - z * vy;\n            this.y = z * vx - x * vz;\n            this.z = x * vy - y * vx;\n            return this;\n        };\n\n        length(): number {\n            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n        }\n\n        scale(value: Vec3): Vec3;\n        scale(value: number): Vec3;\n        scale(value: any): Vec3 {\n            this.x *= value instanceof Vec3 ? value.x : value;\n            this.y *= value instanceof Vec3 ? value.y : value;\n            this.z *= value instanceof Vec3 ? value.z : value;\n            return this;\n        }\n\n        normalize() {\n            var length = this.length();\n            if (length > 0) {\n                this.scale(1 / length);\n            }\n            return this;\n        }\n\n        clone(): Vec3 {\n            return new Vec3(this.x, this.y, this.z);\n        }\n\n        invert(): Vec3 {\n            this.x = -this.x;\n            this.y = -this.y;\n            this.z = -this.z;\n            return this;\n        }\n\n        toArray(): Array<number> {\n            return [this.x, this.y, this.z];\n        }\n\n    }\n\n    /**\n     * 3x3 matrix math\n     */\n    export class Mat3 {\n\n        data: Array<number>;\n\n        constructor(data?: Array<number>) {\n            this.data = data || [\n                0, 0, 0,\n\t\t\t    0, 0, 0,\n\t\t\t    0, 0, 0\n            ];\n        }\n\n        transpose() : Mat3 {\n            const a = this.data, \n                a01 = a[1],\n                a02 = a[2],\n                a12 = a[5];\n            a[1] = a[3];\n            a[2] = a[6];\n            a[3] = a01;\n            a[5] = a[7];\n            a[6] = a02;\n            a[7] = a12;\n            return this;\n        }\n    }\n\n    /**\n     * 4x4 matrix math\n     */\n    export class Mat4 {\n\n        public data: Array<number>;\n\n        constructor(data?: Array<number>) {\n            this.data = data || [\n                1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1\n            ];\n        }\n\n        clone(): Mat4 {\n            return new Mat4(this.data);\n        }\n\n        multiply(b: Array<number>): Mat4 {\n            const a: Array<number> = this.data,\n                a00: number = a[0 * 4 + 0],\n                a01: number = a[0 * 4 + 1],\n                a02: number = a[0 * 4 + 2],\n                a03: number = a[0 * 4 + 3],\n                a10: number = a[1 * 4 + 0],\n                a11: number = a[1 * 4 + 1],\n                a12: number = a[1 * 4 + 2],\n                a13: number = a[1 * 4 + 3],\n                a20: number = a[2 * 4 + 0],\n                a21: number = a[2 * 4 + 1],\n                a22: number = a[2 * 4 + 2],\n                a23: number = a[2 * 4 + 3],\n                a30: number = a[3 * 4 + 0],\n                a31: number = a[3 * 4 + 1],\n                a32: number = a[3 * 4 + 2],\n                a33: number = a[3 * 4 + 3],\n                b00: number = b[0 * 4 + 0],\n                b01: number = b[0 * 4 + 1],\n                b02: number = b[0 * 4 + 2],\n                b03: number = b[0 * 4 + 3],\n                b10: number = b[1 * 4 + 0],\n                b11: number = b[1 * 4 + 1],\n                b12: number = b[1 * 4 + 2],\n                b13: number = b[1 * 4 + 3],\n                b20: number = b[2 * 4 + 0],\n                b21: number = b[2 * 4 + 1],\n                b22: number = b[2 * 4 + 2],\n                b23: number = b[2 * 4 + 3],\n                b30: number = b[3 * 4 + 0],\n                b31: number = b[3 * 4 + 1],\n                b32: number = b[3 * 4 + 2],\n                b33: number = b[3 * 4 + 3];\n            this.data = [\n                a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30,\n                a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31,\n                a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32,\n                a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33,\n                a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30,\n                a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31,\n                a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32,\n                a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33,\n                a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30,\n                a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31,\n                a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32,\n                a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33,\n                a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30,\n                a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31,\n                a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32,\n                a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33\n            ];\n            return this;\n        }\n\n        scale(vec: Vec3): Mat4 {\n            return this.multiply([\n                vec.x, 0, 0, 0,\n                0, vec.y, 0, 0,\n                0, 0, vec.z, 0,\n                0, 0, 0, 1,\n            ]);\n        }\n\n        translate(vec: Vec3): Mat4 {\n            return this.multiply([\n                1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                vec.x, vec.y, vec.z, 1\n            ]);\n        }\n\n        rotateX(angle: number): Mat4 {\n            const c = Math.cos(angle);\n            const s = Math.sin(angle);\n            return this.multiply([\n                1, 0, 0, 0,\n                0, c, s, 0,\n                0, -s, c, 0,\n                0, 0, 0, 1\n            ]);\n        }\n\n        rotateY(angle: number): Mat4 {\n            const c = Math.cos(angle);\n            const s = Math.sin(angle);\n            return this.multiply([\n                c, 0, -s, 0,\n                0, 1, 0, 0,\n                s, 0, c, 0,\n                0, 0, 0, 1\n            ]);\n        }\n\n        rotateZ(angle: number): Mat4 {\n            const c = Math.cos(angle);\n            const s = Math.sin(angle);\n            return this.multiply([\n                c, s, 0, 0,\n                -s, c, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1,\n            ]);\n        }\n\n        rotate(vec: Vec3): Mat4 {\n            return this\n                .rotateX(vec.x)\n                .rotateY(vec.y)\n                .rotateZ(vec.z);\n        }\n\n        perspective(fov: number, aspect: number, near: number, far: number): Mat4 {\n            const f: number = Math.tan(Math.PI * 0.5 - 0.5 * fov);\n            const rangeInv: number = 1.0 / (near - far);\n            return this.multiply([\n                f / aspect, 0, 0, 0,\n                0, f, 0, 0,\n                0, 0, (near + far) * rangeInv, -1,\n                0, 0, near * far * rangeInv * 2, 0\n            ]);\n        }\n\n        invert(): Mat3 {\n            const mat = this.data,\n                a00 = mat[0], a01 = mat[1], a02 = mat[2],\n                a10 = mat[4], a11 = mat[5], a12 = mat[6],\n                a20 = mat[8], a21 = mat[9], a22 = mat[10],\n                b01 = a22 * a11 - a12 * a21,\n                b11 = -a22 * a10 + a12 * a20,\n                b21 = a21 * a10 - a11 * a20,\n                d = a00 * b01 + a01 * b11 + a02 * b21;\n            if (!d) {\n                return null;\n            }\n            const id = 1 / d;\n            return new Mat3([\n                b01 * id,\n                (-a22 * a01 + a02 * a21) * id,\n                (a12 * a01 - a02 * a11) * id,\n                b11 * id,\n                (a22 * a00 - a02 * a20) * id,\n                (-a12 * a00 + a02 * a10) * id,\n                b21 * id,\n                (-a21 * a00 + a01 * a20) * id,\n                (a11 * a00 - a01 * a10) * id\n            ]);\n        }\n\n    }\n\n    export abstract class Collider {\n\n        transform: Transform;\n\n        scale: Vec3;\n\n        constructor(transform: Transform, scale?: Vec3) {\n            this.transform = transform;\n            this.scale = scale ? scale : transform.scale;\n        }\n\n        getTranslate(): Vec3 {\n            let translate = this.transform.translate.clone(),\n                parent = this.transform.parent;\n            while (parent) {\n                translate.scale(parent.scale).add(parent.translate);\n                parent = parent.parent;\n            }\n            return translate;\n        }\n\n        getScale(): Vec3 {\n            let scale = this.scale.clone().scale(.5),\n                parent = this.transform.parent;\n            while (parent) {\n                scale.scale(parent.scale);\n                parent = parent.parent;\n            }\n            return scale;\n        }\n\n        abstract intersect(other: Sphere): Vec3;\n\n    }\n\n    export class Sphere extends Collider {\n\n        intersect(other: Sphere): Vec3 {\n            let collide = null,\n                translate = this.getTranslate(),\n                otherTranslate = other.getTranslate(),\n                distance = translate.distance(otherTranslate),\n                minDistance = this.getScale().max() + other.getScale().max();\n            if (distance < minDistance) {\n                collide = otherTranslate.sub(translate).normalize().scale(minDistance - distance);\n            }\n            return collide;\n        }\n\n    }\n\n    export class Box extends Collider {\n\n        intersect(other: Sphere) {\n            let pos = this.getTranslate(),\n                scale = this.getScale(),\n                otherPos = other.getTranslate(),\n                otherScale = other.getScale().max(),\n                closest = new Vec3(\n                    Math.max(pos.x - scale.x, Math.min(otherPos.x, pos.x + scale.x)),\n                    Math.max(pos.y - scale.y, Math.min(otherPos.y, pos.y + scale.y)),\n                    Math.max(pos.z - scale.z, Math.min(otherPos.z, pos.z + scale.z))\n                ),\n                distance = closest.distance(otherPos),\n                collide = null;\n            if (distance < otherScale) {\n                collide = otherPos.sub(closest).normalize().scale(otherScale - distance);\n            }\n            return collide;\n        }\n\n    }\n\n    /**\n     * Transform class\n     */\n    export class Transform {\n\n        scale: Vec3;\n        rotate: Vec3;\n        translate: Vec3;\n        parent: Transform;\n\n        constructor(data: Array<number> = []) {\n            this.translate = new Vec3(data[0] || 0, data[1] || 0, data[2] || 0);\n            this.rotate = new Vec3(data[3] || 0, data[4] || 0, data[5] || 0);\n            this.scale = new Vec3(data[6] || 1, data[7] || 1, data[8] || 1);\n        }\n\n        matrix(matrix?: Mat4) : Mat4 {\n            matrix = matrix || new Mat4();\n            matrix.scale(this.scale)\n                .rotate(this.rotate.clone().scale(RAD_SCALE))\n                .translate(this.translate);\n            return this.parent\n                ? this.parent.matrix(matrix)\n                : matrix;\n        }\n\n    }\n\n    /**\n     * 3D Camera settings\n     */\n    export class Camera {\n\n        fov: number;\n        aspect: number;\n        near: number;\n        far: number;\n        rotate: Vec3 = new Vec3();\n        position: Vec3 = new Vec3();\n\n        constructor(aspect: number = 1, fov: number = 45, near: number = .1, far: number = 100) {\n            this.fov = fov;\n            this.aspect = aspect;\n            this.near = near;\n            this.far = far;\n        }\n\n        transform(transform: Transform): Mat4 {\n            return transform.matrix()\n                .rotate(this.rotate.clone().invert())\n                .translate(this.position.clone().invert());\n        }\n\n        perspective(): Mat4 {\n            return new Mat4().perspective(this.fov, this.aspect, this.near, this.far);\n        }\n\n    }\n\n    /**\n     * Vertice class\n     */\n    class Vert extends Vec3 {\n\n        faces: Array<Face> = [];\n\n        addFace(face: Face) {\n            this.faces.push(face);\n            return this;\n        }\n\n    }\n\n    /**\n     * Triangle face\n     */\n    class Face {\n\n        verts: Array<Vert> = [];\n        normal: Vec3;\n        normals: Array<Vec3> = [];\n\n        constructor(v1: Vert, v2: Vert, v3: Vert) {\n            v1.addFace(this);\n            v2.addFace(this);\n            v3.addFace(this);\n            this.verts.push(v1, v2, v3);\n            this.normal = v2.clone().sub(v1).cross(v3.clone().sub(v1)).normalize();\n        }\n\n        calcNormals(angleCos: number): Face {\n            this.verts.forEach((vert: Vert, i: number) => {\n                let normal: Vec3;\n                vert.faces.forEach(face => {\n                    if (this.normal.dot(face.normal) > angleCos) {\n                        normal = normal ? normal.add(face.normal) : face.normal.clone();\n                    }\n                });\n                this.normals.push(normal ? normal.normalize() : this.normal);\n            });\n            return this;\n        }\n\n        pushVerts(data: Array<number>): Face {\n            this.verts.forEach((vec: Vert) => {\n                data.push(...vec.toArray());\n            });\n            return this;\n        }\n\n        pushNormals(data: Array<number>): Face {\n            this.normals.forEach((vec: Vert) => {\n                data.push(...vec.toArray());\n            });\n            return this;\n        }\n\n    }\n\n    /**\n     * Generated mesh\n     */\n    export class Mesh {\n\n        verts: WebGLBuffer;\n        normals: WebGLBuffer;\n        length: number;\n\n        constructor(gl: WebGLRenderingContext, divide: number, path: Array<number> = [], smooth: number = 0, angle: number=360) {\n            if (divide < 2) {\n                return;\n            }\n            if (path.length < 2) {\n                path = this.sphere(path.length > 0 ? path[0] + 2 : Math.ceil(divide / 2) + 1);\n            }\n            const verts: Array<Vert> = this.createVerts(divide, path, 0, angle);\n            const faces: Array<Face> = this.createFaces(verts, divide, path.length / 2);\n            const cos = Math.cos(smooth * RAD_SCALE);\n            const vertData = [];\n            const normalData = [];\n            faces.forEach((face: Face) => {\n                face.calcNormals(cos)\n                    .pushVerts(vertData)\n                    .pushNormals(normalData);\n            });\n            this.verts = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.verts);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertData), gl.STATIC_DRAW);\n            this.normals = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.normals);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normalData), gl.STATIC_DRAW);\n            this.length = vertData.length / 3;\n        }\n\n        private sphere(divide: number) {\n            const path = [];\n            if (divide < 3) {\n                return;\n            }\n            let angle: number = Math.PI / (divide - 1);\n            for (let i = 1; i < divide - 1; i++) {\n                let a = angle * i;\n                path.push(Math.sin(a) / 2);\n                path.push(Math.cos(a) / 2);\n            }\n            return path;\n        }\n\n        private createVerts(divide: number, path: Array<number>, start: number, end: number): Array<Vert> {\n            start *= RAD_SCALE;\n            end *= RAD_SCALE;\n            let verts: Array<Vert> = [];\n            let angle: number = (end - start) / divide;\n            verts.push(new Vert(0, .5, 0));\n            verts.push(new Vert(0, -.5, 0));\n            for (let i = 0; i < divide; i++) {\n                let a = angle * i + start;\n                let x = Math.cos(a);\n                let z = Math.sin(a);\n                for (let j = 0; j < path.length; j += 2) {\n                    let vert = new Vert(x, 0, z);\n                    vert.scale(path[j]).y = path[j + 1];\n                    verts.push(vert);\n                }\n            }\n            return verts;\n        }\n\n        private createFaces(verts: Array<Vert>, divide: number, length: number): Array<Face> {\n            const faces: Array<Face> = [];\n            let index;\n            for (let i = 1; i < divide; ++i) {\n                index = i * length + 2;\n                faces.push(new Face(verts[0], verts[index], verts[index - length]));\n                faces.push(new Face(verts[1], verts[index - 1], verts[index + length - 1]));\n                for (let j = 0; j < length - 1; j++) {\n                    let add = index + j;\n                    faces.push(new Face(verts[add + 1], verts[add - length], verts[add]));\n                    faces.push(new Face(verts[add - length + 1], verts[add - length], verts[add + 1]));\n                }\n            }\n            faces.push(new Face(verts[0], verts[2], verts[index]));\n            faces.push(new Face(verts[1], verts[index + length - 1], verts[length + 1]));\n            for (let j = 0; j < length - 1; j++) {\n                let add = index + j;\n                faces.push(new Face(verts[j + 3], verts[add], verts[j + 2]));\n                faces.push(new Face(verts[add + 1], verts[add], verts[j + 3]));\n            }\n            return faces;\n        }\n\n    }\n\n    /**\n     * Simple game item\n     */\n    export class Item {\n\n        mesh: Mesh;\n        color: Array<number>;\n        transform: Transform;\n        collider: Collider;\n        childs: Array<Item> = [];\n        active: boolean = true;\n        stroke: number = 0;\n\n        constructor(mesh?: Mesh, color?: Array<number>, transform?: Array<number>) {\n            this.mesh = mesh;\n            this.color = color;\n            this.transform = new Transform(transform);\n        }\n\n        add(child) {\n            this.childs.push(child);\n            child.transform.parent = this.transform;\n            return this;\n        }\n\n    }\n\n    /**\n     * Shader utility\n     */\n    export class Shader {\n\n        gl: WebGLRenderingContext;\n        program: WebGLProgram;\n        indices: WebGLBuffer;\n        attribs: object = {};\n        location: object = {};\n\n        constructor(gl: WebGLRenderingContext, vertexShader: string, fragmentShader: string) {\n            this.gl = gl;\n            this.program = gl.createProgram();\n            this.indices = gl.createBuffer();\n            const program = this.program;\n            gl.attachShader(program, this.create(gl.VERTEX_SHADER, vertexShader));\n            gl.attachShader(program, this.create(gl.FRAGMENT_SHADER, fragmentShader));\n            gl.linkProgram(program);\n            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n                console.log(gl.getProgramInfoLog(program));\n                gl.deleteProgram(program);\n            }\n        }\n\n        private create(type: number, source: string): WebGLShader {\n            const gl = this.gl;\n            const shader = gl.createShader(type);\n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                console.log(gl.getShaderInfoLog(shader));\n            }\n            return shader;\n        }\n\n        attrib(name: string, values: WebGLBuffer, size: number): Shader {\n            const gl = this.gl;\n            if (!this.location[name]) {\n                this.location[name] = gl.getAttribLocation(this.program, name);\n            }\n            const location = this.location[name];\n            gl.bindBuffer(gl.ARRAY_BUFFER, values);\n            gl.enableVertexAttribArray(location);\n            gl.vertexAttribPointer(location, size, gl.FLOAT, false, 0, 0);\n            return this;\n        }\n\n        uniform(name: string, value: number): Shader;\n        uniform(name: string, value: Array<number>): Shader;\n        uniform(name: string, value: any): Shader {\n            const gl = this.gl;\n            if (!this.location[name]) {\n                this.location[name] = gl.getUniformLocation(this.program, name);\n            }\n            const location = this.location[name];\n            if (typeof value == 'number') {\n                gl.uniform1f(location, value);\n                return this;\n            }\n            switch (value.length) {\n                case 2: gl.uniform2fv(location, value); break;\n                case 3: gl.uniform3fv(location, value); break;\n                case 4: gl.uniform4fv(location, value); break;\n                case 9: gl.uniformMatrix3fv(location, false, value); break;\n                case 16: gl.uniformMatrix4fv(location, false, value); break;\n            }\n            return this;\n        }\n\n    }\n\n}","namespace SFX {\n\n    declare var window: any;\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    window.OfflineAudioContext = window.OfflineAudioContext || window.webkitOfflineAudioContext;\n\n    const bitrate = 44100;\n    const keys = { c: 0, db: 1, d: 2, eb: 3, e: 4, f: 5, gb: 6, g: 7, ab: 8, a: 9, bb: 10, b: 11 };\n    const freq = [];\n    const out = new AudioContext();\n    const ctx = new OfflineAudioContext(1, bitrate * 2, bitrate);\n    const gains: { [id: string]: GainNode } = {};\n    const buffers : { [id: string]: AudioBuffer } = {};\n    let noise: AudioBuffer;\n    let output: Float32Array;\n\n    export class Sound {\n\n        type: OscillatorType;\n        curve: Float32Array;\n        length: number;\n\n        constructor(type: OscillatorType, curve: number[], length: number) {\n            this.type = type;\n            this.curve = Float32Array.from(curve);\n            this.length = length;\n        }\n\n        time(max): number {\n            return (max < this.length ? max : this.length) - .01;\n        }\n\n        async render(id: string, freq: number[], time: number): Promise<void> {\n            let ctx = new OfflineAudioContext(1, bitrate * time, bitrate),\n                vol = ctx.createGain(),\n                curve = Float32Array.from(freq);\n            vol.connect(ctx.destination);\n            if (this.curve) {\n                vol.gain.setValueCurveAtTime(this.curve, 0, this.time(time));\n            }\n            ctx.addEventListener('complete', (e) => {\n                buffers[id] = e.renderedBuffer;\n            });\n            if (this.type == 'custom') {\n                let src = ctx.createBufferSource(),\n                    filter = ctx.createBiquadFilter();\n                filter.connect(vol);\n                filter.detune.setValueCurveAtTime(curve, 0, time);\n                src.buffer = noise;\n                src.loop = true;\n                src.connect(filter);\n                src.start();\n            } else {\n                let osc = ctx.createOscillator();\n                osc.type = this.type;\n                osc.frequency.setValueCurveAtTime(curve, 0, time);\n                osc.connect(vol);\n                osc.start();\n                osc.stop(time);\n            }\n            await ctx.startRendering();\n        }\n\n    }\n\n    export class Channel {\n\n        inst: Sound;\n        data: number[][];\n        size: number;\n        length: number;\n\n        constructor(inst: Sound, notes: string, tempo: number) {\n            this.inst = inst;\n            this.data = [];\n            this.size = 0;\n            this.length = 0;\n            let sheet = notes.split('|');\n            if (sheet.length > 1) {\n                notes = '';\n                for (let i = 0; i < sheet.length; i++) {\n                    notes += i % 2\n                        ? (',' + sheet[i-1]).repeat(parseInt(sheet[i]) - 1)\n                        : (notes ? ',' : '') + sheet[i];\n                }\n            }\n            notes.split(',').forEach((code) => {\n                let div = code.match(/^(\\d+)/),\n                    freqs = code.match(/([a-z]+\\d+)/g);\n                if (div) {\n                    let time = tempo / parseInt(div[1]),\n                        row = [time];\n                    this.length += time;\n                    if (freqs) {\n                        if (freqs.length > this.size) {\n                            this.size = freqs.length;\n                        }\n                        for (let i = 0; i < freqs.length; i++) {\n                            let note = freqs[i].match(/([a-z]+)(\\d+)/);\n                            if (note) {\n                                row.push(freq[parseInt(note[2]) * 12 + keys[note[1]]]);\n                            }\n                        }\n                    }\n                    this.data.push(row);\n                }\n            });\n        }\n\n        play(ctx: OfflineAudioContext) {\n            let length = 0,\n                inst = this.inst,\n                vol = ctx.createGain(),\n                osc = [];\n            vol.connect(ctx.destination);\n            for (let i = 0; i < this.size; i++) {\n                osc[i] = ctx.createOscillator();\n                osc[i].type = inst.type;\n                osc[i].connect(vol);\n            }\n            this.data.forEach(note => {\n                if (inst.curve) {\n                    vol.gain.setValueCurveAtTime(inst.curve, length, inst.time(note[0]));\n                }\n                osc.forEach((o, i) => {\n                    o.frequency.setValueAtTime(note[i + 1] || 0, length);\n                });\n                length += note[0];\n            });\n            osc.forEach(o => {\n                o.start();\n                o.stop(length);\n            });\n        }\n\n    }\n\n    export async function init(): Promise<void> {\n        if (out.state === 'suspended') {\n            await out.resume();\n        }\n        let a = Math.pow(2, 1 / 12);\n        for (let n = -57; n < 50; n++) {\n            freq.push(Math.pow(a, n) * 440);\n        }\n        noise = out.createBuffer(1, bitrate * 2, bitrate);\n        output = noise.getChannelData(0);\n        for (let i = 0; i < bitrate * 2; i++) {\n            output[i] = Math.random() * 2 - 1;\n        }\n    }\n\n    export async function render(id: string, channels: Channel[]): Promise<void> {\n        let length = 0;\n        channels.forEach(channel => {\n            if (channel.length > length) {\n                length = channel.length;\n            }\n        });\n        const ctx = new OfflineAudioContext(1, bitrate * length, bitrate);\n        ctx.addEventListener('complete', (e) => {\n            buffers[id] = e.renderedBuffer;\n        });\n        channels.forEach((channel, i) => {\n            channel.play(ctx);\n        });\n        await ctx.startRendering();\n    }\n\n    export function mixer(id: string): GainNode {\n        if (!(id in gains)) {\n            gains[id] = out.createGain();\n            gains[id].connect(out.destination);\n        }\n        return gains[id];\n    }\n\n    export function play(id: string, loop: boolean = false, mixerId: string = 'master'): AudioBufferSourceNode {\n        if (id in buffers) {\n            let src = out.createBufferSource();\n            if (loop) {\n                src.loop = true;\n            }\n            src.buffer = buffers[id];\n            src.connect(mixer(mixerId));\n            src.start();\n            return src;\n        }\n        return null;\n    }\n}","namespace Game {\n\n    export class Enemy extends T3D.Item {\n\n        explode: number;\n\n        init(active: boolean) {\n            this.active = active;\n            this.stroke = 0;\n            this.explode = 0;\n            this.transform.rotate.set(0, 0, 0);\n            this.transform.translate.set(0, 1, 0);\n        }\n\n        update(speed: number, end:boolean) {\n            if (!this.active) {\n                return;\n            }\n            this.stroke += (this.explode - this.stroke) / 25;\n            if (this.stroke) {\n                return;\n            }\n            let pos = this.transform.translate,\n                rotate = this.transform.rotate;\n            pos.z = end ? 0 : pos.z + speed / 2;\n            rotate.z = (rotate.z + 5) % 360;\n            rotate.x = (rotate.x + 3) % 360;\n        }\n\n        intersect(hero: Hero) {\n            if (this.active && !this.explode && !hero.explode && this.collider.intersect(hero.collider)) {\n                if (hero.speedTime) {\n                    this.explode = 7;\n                    Event.trigger('hit', hero);\n                    return;\n                }\n                hero.explode = 7;\n                Event.trigger('exp', hero);\n            }\n        }\n    }\n\n}","namespace Game {\n\n    export class Event {\n\n        private static listener: {[event: string]: {(event?:string, params?: any): void}[]} = { all: [] };\n\n        static on(event:string, listener: {(event?:string, params?: any): void}): void {\n            const events = event.match(/[a-zA-Z]+/g);\n            if (!events) {\n                return;\n            }\n            events.forEach(event => {\n                if (!(event in Event.listener)) {\n                    Event.listener[event] = [];\n                }\n                Event.listener[event].push(listener);\n            });\n        }\n\n        static trigger(event: string, params?: any): void {\n            Event.listener['all'].forEach(listener => {\n                listener(event, params);\n            });\n            if (event in Event.listener) {\n                Event.listener[event].forEach(listener => {\n                    listener(event, params);\n                });\n            }\n        }\n    }\n}","/// <reference path=\"../t3d.ts\"/>\n\nnamespace Game {\n\n    export class Hero extends T3D.Item {\n\n        x: number;\n        rad: number;\n        acc: number;\n        speed: T3D.Vec3;\n        speedTime: number;\n        scale: number;\n        scaleTime: number;\n        magnet: T3D.Vec3;\n        magnetTime: number;\n        distance: number;\n        tokenCollider: T3D.Sphere;\n        collide: T3D.Vec3;\n        explode: number;\n\n        init(reset: boolean = true) {\n            const transform = this.transform; \n            transform.translate.set(0, 0, 0);\n            transform.rotate.set(0, 0, 90);\n            transform.scale.set(1, 1, 1);\n            this.color = COLOR.WHITE;\n            this.active = true;\n            this.transform = transform;\n            this.collider = new T3D.Sphere(transform);\n            this.tokenCollider = new T3D.Sphere(transform);\n            this.x = 0;\n            this.rad = .4;\n            this.acc = -.015;\n            this.speed = new T3D.Vec3(0, 0, .1);\n            this.speedTime = 0;\n            this.scale = .8;\n            this.scaleTime = 0;\n            this.magnet = new T3D.Vec3(5, 5, 5);\n            this.magnetTime = 0;\n            this.explode = 0;\n            this.stroke = 0;\n            if (reset) {\n                this.distance = 0;\n            }\n        }\n\n        left() {\n            if (this.x >= 0) {\n                this.x--;\n                Event.trigger('move', this);\n            }\n        }\n\n        right() {\n            if (this.x <= 0) {\n                this.x++;\n                Event.trigger('move', this);\n            }\n        }\n\n        jump() {\n            if (this.collide) {\n                this.acc = .03;\n                Event.trigger('jump', this);\n            }\n        }\n\n        boost() {\n            this.speedTime = 75;\n            Event.trigger('move', this);\n        }\n\n        magnetize() {\n            this.magnetTime = 450;\n            Event.trigger('power', this);\n        }\n\n        dash() {\n            this.scaleTime = 40;\n            Event.trigger('move', this);\n        }\n\n        coin() {\n            Event.trigger('coin', this);\n        }\n\n        cancel() {\n            this.x = Math.round(this.transform.translate.x);\n        }\n\n        update() {\n            let pos = this.transform.translate,\n                scale = this.scale,\n                rotate = this.transform.rotate,\n                speed = (this.speedTime ? .13 : .08) + Math.min(this.distance / 15000, .04);\n            this.speed.z += ((this.active ? speed : 0) - this.speed.z) / 20;\n            this.speedTime -= this.speedTime > 0 ? 1 : 0;\n            this.color = this.magnetTime > 100 || this.magnetTime % 20 > 10 ? COLOR.PINK : COLOR.WHITE;\n            this.scale += ((this.scaleTime ? .5 : .7) - this.scale) / 5;\n            this.scaleTime -= this.scaleTime > 0 ? 1 : 0;\n            this.magnetTime -= this.magnetTime > 0 ? 1 : 0;\n            this.tokenCollider.scale = this.magnetTime ? this.magnet : this.transform.scale;\n            this.stroke += (this.explode - this.stroke) / 25;\n            this.active = pos.y > -10 && this.stroke < 6;\n            if (!this.active || this.stroke) {\n                return;\n            }\n            this.acc -= this.acc > -.012 ? .003 : 0;\n            rotate.z = 90 + (pos.x - this.x) * 25;\n            rotate.y = (rotate.y + this.speed.z * 100) % 360;\n            this.speed.y += this.acc;\n            if (this.speed.y < -.25) {\n                this.speed.y = -.25;\n            }\n            pos.x += (this.x - pos.x) / 7;\n            pos.y += this.speed.y;\n            pos.z -= pos.z / 30;\n            this.transform.scale.set(scale, scale, scale);\n        }\n\n        preview() {\n            let rotate = this.transform.rotate;\n            rotate.y = (rotate.y + 1) % 360;\n            rotate.z = (rotate.z + .7) % 360;\n        }\n\n    }\n    \n}","namespace Game {\n\n    export class Map {\n\n        mirror: boolean;\n        config: string[];\n        count: number;\n        data: string[];\n        row: number[];\n        length: number;\n        steps: number;\n        step: number;\n        min: number;\n\n        constructor(config: string, lenght: number = 7, steps: number = 150) {\n            this.config = config.split('|');\n            this.length = lenght;\n            this.steps = steps;\n        }\n\n        init() {\n            this.row = [1,1,1];\n            this.count = 10;\n            this.data = [];\n            this.step = 0;\n            this.min = 0;\n            this.update();\n        }\n\n        max() {\n            let max = this.min + this.length,\n                length = this.config.length;\n            return max < length ? max : length - 1;\n        }\n\n        update(): boolean {\n            let next = false;\n            if (++this.step > this.steps) {\n                next = true;\n                this.step = 0;\n                if (this.min + this.length < this.config.length - 1) { \n                    this.min++;\n                }\n            }\n            if (--this.count > 0) {\n                return next;\n            }\n            if (!this.data.length) {\n                this.mirror = Rand.get() > .5;\n                let index = Rand.get(this.max(), this.min, true);\n                this.data = this.config[index].match(/.{1,4}/g);\n            }\n            this.row = this.data.shift().split('').map(c => parseInt(c, 36));\n            this.count = this.row.shift();\n            if (this.mirror) {\n                this.row.reverse();\n            }\n            return next;\n        }\n\n    }\n\n}","namespace Game {\n\n    const STORE = 'offliner_hi';\n\n    export class Menu {\n\n        body: Element;\n        btn: Element;\n        shop: boolean;\n        info: NodeListOf<Element>;\n        active: boolean;\n        storage: any;\n        selected: number;\n        heroes: any[];\n        scores: NodeListOf<Element>;\n        tasklist: NodeListOf<Element>;\n        tasks: Task[];\n        stats: any;\n        sfxBtn: Element;\n        volume: number;\n\n        constructor() {\n            let data = JSON.parse(window.localStorage.getItem(STORE));\n            this.body = $('body');\n            this.btn = $('#play');\n            this.info = document.getElementsByTagName('H3');;\n            this.shop = true;\n            this.active = true;\n            this.storage = data && typeof data === 'object' && 'shop' in data ? data : {\n                score: 0,\n                token: 0,\n                level: 0,\n                shop: [0]\n            }; \n            this.selected = 0;\n            this.heroes = [\n                {name: 'SPUTNIK', price: 0},\n                {name: 'VOYAGER', price: 500},\n                {name: 'PIONEER', price: 1000},\n                {name: 'CASSINI', price: 2500}\n            ];\n            this.tasklist = document.getElementsByTagName('H4');\n            this.scores = document.getElementsByTagName('TD');\n            this.stats = {};\n            this.sfxBtn = $('#sfx');\n            this.volume = .3;\n            this.hero();\n            this.bind();\n            this.init();\n        }\n\n        level() {\n            return this.storage.level + 1;\n        }\n\n        init() {\n            let level = this.level(),\n                tasks = [],\n                target = Math.ceil(level / 3);\n            switch (level % 3) {\n                case 1:\n                    tasks.push(new Task('coin', target * 75));\n                    break;\n                case 2:\n                    tasks.push(new Task('power', target, target % 2 == 0));\n                    break;\n                default:\n                    tasks.push(new Task('coin', target * 50, true));\n                    break;\n            }\n            target = Math.ceil(level / 4);\n            switch (level % 4) {\n                case 1:\n                    tasks.push(target < 8\n                        ? new Task('planet', target) \n                        : new Task('hit', target, true)\n                    );\n                    break;\n                case 2:\n                    tasks.push(target % 2 == 1\n                        ? new Task('fence', 5 * target)\n                        : new Task('fence', 3 * target, true)\n                    );\n                    break;\n                case 3:\n                    tasks.push(target % 2 == 1\n                        ? new Task('enemy', 3 * target)\n                        : new Task('enemy', 2 * target, true)\n                    );\n                    break;\n                default:\n                    tasks.push(new Task('hit', target));\n                    break;\n            }\n            this.tasks = tasks;\n        }\n\n        bind() {            \n            on($('#ok'), 'click', () => {\n                Event.trigger('end');\n            });\n            on(this.btn, 'click', () => {\n                this.play();\n            });\n            on($('#prev'), 'click', () => {\n                this.prev();\n            });\n            on($('#next'), 'click', () => {\n                this.next();\n            });\n            on($('#fs'), 'click', () => {\n                if (!document.webkitFullscreenElement) {\n                    document.documentElement.webkitRequestFullscreen();\n                } else if (document.webkitExitFullscreen) {\n                    document.webkitExitFullscreen();\n                }\n            });\n            on(this.sfxBtn, 'click', () => {\n                let btn = this.sfxBtn,\n                    music = SFX.mixer('music'),\n                    sound = SFX.mixer('master'),\n                    time = sound.context.currentTime;\n                try {\n                    switch(btn.className) {\n                        case 'no':\n                            this.volume = .3;\n                            music.gain.setValueAtTime(this.volume, time);\n                            sound.gain.setValueAtTime(1, time);\n                            btn.className = '';\n                            break;\n                        case 'sfx':\n                            sound.gain.setValueAtTime(0, time);\n                            btn.className = 'no';\n                            break;\n                        default:\n                            this.volume = 0;\n                            music.gain.setValueAtTime(this.volume, time);\n                            btn.className = 'sfx';\n                    }\n                } catch (ex) {}\n            });\n            Event.on('all', (event) => {\n                if (event in this.stats) {\n                    this.stats[event] += 1;\n                } else {\n                    this.stats[event] = 1;\n                }\n                this.tasks.forEach(task => {\n                    task.on(event);\n                });\n            });\n        }\n\n        input(key: number): void {\n            if (!this.active) {\n                return;\n            }\n            switch (key) {\n               case 32:\n                    if (this.shop) {\n                        this.play()\n                    } else {\n                        Event.trigger('end');\n                    }\n                    break;\n                case 37:\n                    this.prev();\n                    break;\n                case 39:\n                    this.next();\n                    break;\n            }\n        }\n\n        play() {\n            if (this.btn.textContent == 'PLAY') {\n                this.stats = {};\n                Event.trigger('start');\n            } else if (this.btn.className == '') {\n                this.storage.token -= this.heroes[this.selected].price;\n                this.storage.shop.push(this.selected);\n                this.store();\n                this.hero();\n            }\n        }\n\n        hero() {\n            let token = this.storage.token,\n                data = this.heroes[this.selected],\n                buy = this.storage.shop.indexOf(this.selected) < 0,\n                can = token >= data.price;\n            this.info.item(0).textContent = data.name;\n            this.info.item(1).textContent = buy ? `₮ ${data.price} / ${token}` : '';\n            this.btn.textContent = buy ? 'BUY' : 'PLAY';\n            this.btn.className = !buy || can ? '' : 'disabled';\n        }\n\n        prev() {\n            if (--this.selected < 0) {\n                this.selected = this.heroes.length -1;\n            }\n            this.hero();\n        }\n\n        next() {\n            if (++this.selected >= this.heroes.length) {\n                this.selected = 0;\n            }\n            this.hero();\n        }\n\n        store() {\n            window.localStorage.setItem(STORE, JSON.stringify(this.storage));\n        }\n\n        mission(result: boolean = false) {\n            let complete = true;\n            this.tasks.forEach((task, i) => {\n                if (!result) {\n                    task.init();\n                }\n                let item = this.tasklist.item(i + 1);\n                item.textContent = task.toString();\n                item.className = task.done ? 'done' : '';\n                complete = complete && task.done;\n            });\n            if (complete) {\n                this.storage.level++;\n                this.store();\n                this.init();\n            }\n            return complete;\n        }\n\n        score(hero: Hero) {\n            let high = this.storage.score || 0,\n                element = this.tasklist.item(0),\n                scores = this.scores,\n                hit = this.stats.hit || 0,\n                places = (this.stats.planet || 0) + 1,\n                power = this.stats.power || 0,\n                tokens = this.stats.coin || 0,\n                total = Math.round(hero.distance),\n                mission = this.mission(true) ? 1 : 0;\n            scores.item(0).textContent = total + '';\n            scores.item(1).textContent = '₮ ' + tokens + ' x 10';\n            scores.item(2).textContent = power + ' x 25';\n            scores.item(3).textContent = hit + ' x 50';\n            scores.item(4).textContent = places + ' x 100';\n            scores.item(5).textContent = mission + ' x 500';\n            total += (mission * 500) + (places * 100) + (hit * 50) + (power * 25) + (tokens * 10);\n            scores.item(6).textContent = total + '';\n            if (high < total) {\n                element.textContent = 'NEW HIGH SCORE';\n                this.storage.score = total;\n            } else {\n                element.textContent = 'SCORE';\n            }\n            this.storage.token += tokens;\n            this.store();\n            this.active = true;\n            this.body.className = 'end';\n        }\n\n        show() {\n            this.shop = true;\n            this.body.className = '';\n        }\n\n        hide() {\n            this.shop = false;\n            this.active = false;\n            this.mission();\n            this.tasklist.item(0).textContent = 'MISSION ' + this.level();\n            this.scores.item(4).textContent =\n            this.scores.item(5).textContent = '';\n            this.body.className = 'play';\n        }\n\n    }\n\n}","namespace Game {\n\n    export class Platform extends T3D.Item {\n\n        block: T3D.Item;\n        token: Token;\n        fence: T3D.Item;\n        enemy: Enemy;\n\n        update(speed: number): boolean {\n            let pos = this.transform.translate;\n            pos.z += speed;\n            let end = pos.z > 2;\n            if (end) {\n                pos.z -= 11;\n            }\n            let scale = 1;\n            if (pos.z < -8) {\n                scale = pos.z + 9;\n            } else if (pos.z > 1) {\n                scale = 2 - pos.z; \n            }\n            this.transform.scale.set(scale, scale, scale);\n            this.token.update();\n            this.enemy.update(speed, end);\n            return end;\n        }\n\n        intersect(hero: Hero, side: boolean = false) {\n            if (!hero.active || hero.stroke) {\n                return;\n            }\n            let fence = this.fence,\n                collide;\n            this.token.intersect(hero);\n            if (fence.active) {\n                collide = fence.collider.intersect(hero.collider);\n                if (collide) {\n                    if (side && collide.x) hero.cancel();\n                    hero.transform.translate.add(collide);\n                    hero.speed.y += collide.y;\n                }\n            }\n            if (!this.block.active) {\n                return;\n            }\n            collide = this.block.collider.intersect(hero.collider);\n            if (collide) {\n                if (side && collide.x) hero.cancel();\n                hero.transform.translate.add(collide);\n                hero.speed.y += collide.y;\n            }\n            return collide;\n        }\n    }\n\n}","namespace Game {\n\n    export class Scene extends T3D.Item {\n\n        hero: Hero;\n        map: Map; // platform bit map\n        row: number; // active row\n        index: number; // active platform\n        planet: number; // active planet\n        planets: NodeListOf<Element>;\n        platforms: Platform[];\n\n        constructor(hero: Hero, factory, map: Map) {\n            super();\n            this.map = map;\n            this.hero = hero;\n            this.add(this.hero);\n            this.planets = document.getElementsByTagName('LI');\n            this.platforms = [];\n            for (let i = 0; i < 33; i++) {\n                let platform = factory();\n                this.platforms.push(platform);\n                this.add(platform);\n            }\n            this.init();\n        }\n\n        init() {\n            this.row = 9;\n            this.hero.init();\n            this.map.init();\n            let i = 0;\n            for (let z = -9; z < 2; z++) {\n                for (let x = -1; x <= 1; x++) {\n                    let platform = this.platforms[i++];\n                    platform.transform.translate.set(x, -1, z);\n                    platform.enemy.active =\n                    platform.fence.active =\n                    platform.token.active = false;\n                    platform.block.active = true;\n                }\n            }\n            this.planet = this.planets.length - 1;\n            for (i = 0; i < this.planets.length; i++) {\n                this.planets.item(i).className = '';\n            }\n        }\n\n        next() {\n            if (this.planet > 0) {\n                this.planets.item(this.planet--).className = 'hide';\n                Event.trigger('planet', this.planet);\n            }\n        }\n\n        ended() {\n            return Math.abs(this.hero.speed.z) < .01;\n        }\n\n        input(key: number): void {\n            const hero = this.hero;\n            switch (key) {\n                case 37:\n                    hero.left();\n                    break;\n                case 39:\n                    hero.right();\n                    break;\n                case 38:\n                    hero.jump();\n                    break;\n                case 40:\n                    hero.dash();\n                    break;\n                case 32:\n                    hero.boost();\n            }\n        }\n\n        updateRow(speed:number) {\n            this.row -= speed;\n            if (this.row <= -.5) {\n                this.row += 11;\n            }\n            this.index = Math.round(this.row) * 3 + Math.round(this.hero.transform.translate.x) + 1;\n        }\n\n        getIndex(add: number = 0): number {\n            let length = this.platforms.length,\n                index = this.index + add;\n            if (index < 0) {\n                return index + length;\n            }\n            if (index >= length) {\n                return index - length;\n            }\n            return index;\n        }\n\n        update() {\n            this.hero.update();\n            let rotate = false,\n                hero = this.hero,\n                speed = hero.speed.z,\n                fence = 0,\n                enemy = 0;\n            this.platforms.forEach((platform, i) => {\n                if (platform.update(speed)) {\n                    fence += platform.fence.active && hero.transform.translate.y > -1 ? 1 : 0;\n                    enemy += platform.enemy.active && !platform.enemy.stroke && !hero.stroke ? 1 : 0;\n                    let cfg = this.map.row[i % 3],\n                        obj = cfg >> 2;\n                    platform.block.active = (cfg & 1) > 0;\n                    platform.transform.translate.y = (cfg & 2) > 0 ? 0 : -1;\n                    platform.token.init(obj == 1 || obj == 4);\n                    platform.fence.active = obj == 2;\n                    platform.enemy.init(obj == 3);\n                    platform.token.transform.rotate.y = 45;\n                    rotate = true;\n                }\n                platform.enemy.intersect(hero);\n            });\n            if (rotate && this.map.update()) {\n                this.next();\n            }\n            this.updateRow(speed);\n            hero.collide = this.platforms[this.getIndex()].intersect(hero);\n            [-3, 3, -1, 1, -2, 2, -4, 4].forEach(add => {\n                let index = this.getIndex(add),\n                    platform = this.platforms[index];\n                platform.intersect(hero, add == 1 || add == -1);\n            });\n            hero.distance += speed;\n            if (fence > 0) {\n                Event.trigger('fence', fence);\n            }\n            if (enemy > 0) {\n                Event.trigger('enemy', enemy);\n            }\n        }\n\n    }\n\n}","namespace Game {\n\n    const LABEL = {\n        coin: 'Collect $ token',\n        power: 'Collect $ big token',\n        planet: 'Travel to $',\n        fence: 'Dodge junks $ time',\n        enemy: 'Dodge asteroids $ time',\n        hit: 'Destroy $ asteroid',\n    };\n\n    const PLANETS = ['Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune', 'Pluto', 'Space'];\n\n    export class Task {\n\n        event: string;\n\n        target: number;\n\n        count: number;\n\n        run: boolean;\n\n        done: boolean;\n\n        constructor(event: string, target: number, run: boolean = false) {\n            this.event = event;\n            this.target = target;\n            this.count = 0;\n            this.run  = run || event == 'planet';\n            this.done = false;\n        }\n\n        init() {\n            if (!this.done && this.run) {\n                this.count = 0;\n            }\n        }\n\n        on(event: string) {\n            if (!this.done && this.event == event) {\n                this.done = this.target <= ++this.count;\n            }\n        }\n\n        toString() {\n            let event = this.event,\n                text = LABEL[event],\n                param = this.target.toString();\n            if (event == 'planet') {\n                param = PLANETS[this.target - 1];\n            } else {\n                if (this.target > 1) {\n                    text += 's';\n                }\n                if (this.run) {\n                    text += ' on a mission'\n                }\n                if (!this.done && this.count) {\n                    param += ' / ' + this.count;\n                }\n            }\n            return text.replace('$', param);\n        }\n\n    }\n\n}","namespace Game {\n\n    const yellow = [1, 1, .3, 30];\n    const purple = [1, .3, 1, 30];\n\n    export class Token extends T3D.Item {\n\n        big: boolean = false;\n        speed: number;\n\n        init(active: boolean) {\n            this.active = active;\n            this.transform.translate.set(0, 1, 0);\n            this.big = !Rand.get(50, 0, true);\n            this.speed = .01;\n        }\n\n        score() {\n            return this.big ? 5 : 1;\n        }\n\n        update() {\n            let rotate = this.transform.rotate,\n                scale = this.transform.scale;\n            rotate.y = (rotate.y + 1.5) % 360;\n            if (this.big) {\n                scale.set(.7, .15, .7);\n                this.color = purple;\n            } else {\n                scale.set(.5, .1, .5);\n                this.color = yellow;\n            }\n        }\n\n        intersect(hero: Hero) {\n            let collider = this.big ? hero.collider : hero.tokenCollider;\n            if (this.active && this.collider.intersect(collider)) {\n                let pos = this.collider.getTranslate();\n                if (pos.distance(hero.transform.translate) < .5) {\n                    this.active = false;\n                    if (this.big) {\n                        hero.magnetize();\n                    } else {\n                        hero.coin();\n                    }\n                    return;\n                }\n                this.speed += this.speed;\n                this.transform.translate.add(hero.transform.translate.clone().sub(pos).scale(this.speed));\n            }\n        }\n    }\n}","namespace Game {\n\n    export function $(query: string, element?: NodeSelector): Element {\n        return (element || document).querySelector(query);\n    }\n\n    export function on(element: any, event: string, callback: EventListenerOrEventListenerObject, capture: any = false) {\n        element.addEventListener(event, callback, capture);\n    }\n\n    export class Rand {\n\n        static seed: number = Math.random();\n\n        static get(max: number = 1, min: number = 0, round: boolean = true): number {\n            if (max <= min) {\n                return max;\n            }\n            Rand.seed = (Rand.seed * 9301 + 49297) % 233280;\n            let value = min + (Rand.seed / 233280) * (max - min);\n            return round ? Math.round(value) : value;\n        }\n\n    }\n    \n    export const COLOR = {\n        WHITE:  [1, 1, 1, 10],\n        PINK: [1, .3, 1, 30],\n        BLUE: [.3, .3, 1, 30],\n        YELLOW: [1, 1, .3, 30],\n        RED: [1, .3, .3, 0],\n        CYAN: [.3, 1, 1, 30]\n    }\n\n    let running: boolean = false,\n        canvas: HTMLCanvasElement = <HTMLCanvasElement>$('#game'),\n        menu: Menu = new Menu(),\n        music: AudioBufferSourceNode,\n        time: number = new Date().getTime(),\n        gl: WebGLRenderingContext = canvas.getContext('webgl'),\n        light: T3D.Vec3 = new T3D.Vec3(5, 15, 7),\n        camera: T3D.Camera = new T3D.Camera(canvas.width / canvas.height),\n        shader: T3D.Shader = new T3D.Shader(gl,\n            'precision mediump float;' +\n            'attribute vec3 aPos, aNorm;' +\n            'uniform mat4 uWorld, uProj;' +\n            'uniform mat3 uInverse;' +\n            'uniform float uStroke;' +\n            'varying vec4 vPos;' +\n            'varying vec3 vNorm;' +\n            'void main(void) {' +\n                'vec3 pos = aPos + (aNorm * uStroke);' +\n                'vPos = uWorld * vec4(pos, 1.0);' +\n                'vNorm = uInverse * aNorm;' +\n                'gl_Position = uProj * vPos;' +\n            '}',\n\n            'precision mediump float;' +\n            'uniform mat4 uWorld;' +\n            'uniform vec4 uColor;' +\n            'uniform vec3 uLight;' +\n            'uniform float uLevels;' +\n            'varying vec4 vPos;' +\n            'varying vec3 vNorm;' +\n            'vec3 uAmbient = vec3(.2, .2, .2);' +\n            'vec3 uDiffuse = vec3(.8, .8, .8);' +\n            'vec3 uSpecular = vec3(.8, .8, .8);' +\n            'void main(void) {' +\n                'vec3 lightDir = normalize(uLight - vPos.xyz);' +\n                'vec3 normal = normalize(vNorm);' +\n                'vec3 eyeDir = normalize(-vPos.xyz);' +\n                'vec3 reflectionDir = reflect(-lightDir, normal);' +\n                'float specularWeight = 0.0;' +\n                'if (uColor.w > 0.0) { specularWeight = pow(max(dot(reflectionDir, eyeDir), 0.0), uColor.w); }' +\n                'float diffuseWeight = max(dot(normal, lightDir), 0.0);' +\n                'vec3 weight = uAmbient + uSpecular * specularWeight  + uDiffuse * diffuseWeight;' +\n                'vec3 color = uColor.xyz * weight;' +\n                'if (uLevels > 1.0) { color = floor(color * uLevels) * (1.0 / uLevels); }' +\n                'gl_FragColor = vec4(color, 1);' +\n            '}'\n        ),\n        mesh = {\n            hero: [\n                new T3D.Mesh(gl, 10), \n                new T3D.Mesh(gl, 10, [.5, .15, .5, .1, .5, -.1, .5, -.15]),\n                new T3D.Mesh(gl, 10, [.2, .5, .48, .2, .5, .1, .2, .1, .2, -.1, .5, -.1, .48, -.2, .2, -.5]),\n                new T3D.Mesh(gl, 10, [.3, .44, .43, .3, .45, .2, .49, .2, .5, .1, .45, .1, .45, -.1, .5, -.1, .49, -.2, .45, -.2, .43, -.3, .3, -.44]),\n            ],\n            block: new T3D.Mesh(gl, 4, [.55, .5, .65, .4, .65, -.4, .55, -.5]),\n            fence: new T3D.Mesh(gl, 12, [.4, .5, .5, .4, .5, -.4, .4, -.5], 40),\n            token: new T3D.Mesh(gl, 9, [.45, .3, .45, .5, .5, .5, .5, -.5, .45, -.5, .45, -.3], 30),\n            enemy: new T3D.Mesh(gl, 6),\n        },\n        hero: Hero = new Hero(mesh.hero[0], COLOR.WHITE),\n        scene: Scene = new Scene(hero, () => {\n            let platform = new Platform(),\n                block = new T3D.Item(mesh.block, COLOR.BLUE, [,,,,45]),\n                enemy = new Enemy(mesh.enemy, COLOR.CYAN, [,1,,,,,.7,.7,.7]),\n                token = new Token(mesh.token, COLOR.YELLOW, [,1,,90,,,.5,.1,.5]),\n                fence = new T3D.Item(mesh.fence, COLOR.RED, [,1.4,,,,,.8,1,.8]);\n            block.collider = new T3D.Box(block.transform);\n            enemy.collider = new T3D.Sphere(enemy.transform);\n            token.collider = new T3D.Sphere(token.transform);\n            fence.collider = new T3D.Box(fence.transform);\n            platform.block = block;\n            platform.token = token;\n            platform.fence = fence;\n            platform.enemy = enemy;\n            return platform.add(block).add(token).add(fence).add(enemy);\n        }, new Map(\n            '311737173711|4111|5711|3111|'+\n            '211135012111|2111|301531513510|'+\n            '311119973111|5111111d|311120003115|'+\n            '551111dd|305130053051|3111139b3511|'+\n            '211130002115|401510004510'\n        ));\n\n    function resize() {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n        camera.aspect = canvas.width / canvas.height;\n        gl.viewport(0, 0, canvas.width, canvas.height);\n    }\n\n    function bind(): void {\n        let x: number = 0,\n            y: number = 0,\n            min: number = 15,\n            keys: boolean[] = [],\n            drag = false;\n        \n        on(document, 'touchstart', (e: TouchEvent) => {\n            let touch = e.touches[0];\n            x = touch.clientX;\n            y = touch.clientY;\n            drag = true;\n        });\n        \n        on(document, 'touchmove', (e: TouchEvent) => {\n            e.preventDefault();\n            if (!drag || menu.active) {\n                return;\n            }\n            let touch = e.touches[0];\n            if (!keys[39] && touch.clientX - x > min) {\n                keys[39] = true;\n                scene.input(39);\n                drag = false;\n            } else if (!keys[37] && touch.clientX - x < -min) {\n                keys[37] = true;\n                scene.input(37);\n                drag = false;\n            } else if (!keys[40] && touch.clientY - y > min) {\n                keys[40] = true;\n                scene.input(40);\n                drag = false;\n            } else if (!keys[38] && touch.clientY - y < -min) {\n                keys[38] = true;\n                scene.input(38);\n                drag = false;\n            }\n        }, {passive: false});\n        \n        on(document, 'touchend', (e: TouchEvent) => {\n            if (drag && !menu.active) {\n                keys[32] = true;\n                scene.input(32);\n            }\n            keys[32] =\n            keys[37] =\n            keys[38] =\n            keys[39] =\n            keys[40] =\n            drag = false;\n        });\n        \n        on(document, 'keydown', (e: KeyboardEvent) => {\n            if (keys[e.keyCode]) {\n                return;\n            }\n            keys[e.keyCode] = true;\n            if (!running) {\n                if (keys[32]) {\n                    load();\n                }\n            } else if (menu.active) {\n                menu.input(e.keyCode);\n                return;\n            } else {\n                scene.input(e.keyCode);\n            }\n        });\n\n        on(document, 'keyup', (e: KeyboardEvent) => {\n            keys[e.keyCode] = false;\n        });\n        \n        on(window, 'resize', resize);\n\n        on($('#start'), 'click', () => {\n            if (!running) {\n                load();\n            }\n        });\n\n        Event.on('all', (event) => {\n            SFX.play(event);\n        });\n\n        Event.on('start', () => {\n            menu.hide();\n            scene.init();\n            if (!music) {\n                let mixer = SFX.mixer('music'),\n                    time = mixer.context.currentTime;\n                mixer.gain.setValueAtTime(menu.volume, time);\n                music = SFX.play('music', true, 'music');\n            }\n        });\n\n        Event.on('end', () => {\n            hero.init(false);\n            menu.show();\n        });\n    }\n\n    function render(item: T3D.Item, stroke: number = 0) {\n        item.childs.forEach(child => {\n            render(child, stroke);\n        });\n        if (!item.active || !item.mesh) {\n            return;\n        }\n        let invert = item.transform.matrix().invert();\n        if (!invert) {\n            return;\n        }\n        gl.cullFace(stroke > 0 ? gl.FRONT : gl.BACK);\n        gl.useProgram(shader.program);\n        shader.attrib(\"aPos\", item.mesh.verts, 3)\n            .attrib(\"aNorm\", item.mesh.normals, 3)\n            .uniform(\"uWorld\", camera.transform(item.transform).data)\n            .uniform(\"uProj\", camera.perspective().data)\n            .uniform(\"uInverse\", invert.transpose().data)\n            .uniform(\"uColor\", stroke ? [0, 0, 0, 1] : item.color)\n            .uniform(\"uLight\", light.clone().sub(camera.position).toArray())\n            .uniform(\"uStroke\", stroke + item.stroke)\n            .uniform(\"uLevels\", stroke ? 0 : 5);\n        gl.drawArrays(gl.TRIANGLES, 0, item.mesh.length);\n    }\n\n    function update() {\n        requestAnimationFrame(update);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        if (menu.shop) {\n            hero.mesh = mesh.hero[menu.selected];\n            hero.preview();\n            render(hero);\n            render(hero, .02);\n            return;\n        }\n        let now = new Date().getTime();\n        if (now - time > 30) {\n            scene.update();\n        }\n        time = now;\n        scene.update();\n        render(scene);\n        render(scene, .02);\n        if (!hero.active && music) {\n            let mixer = SFX.mixer('music'),\n                time = mixer.context.currentTime;\n            mixer.gain.setValueCurveAtTime(Float32Array.from([menu.volume, 0]), time, .5);\n            music.stop(time + .5);\n            music = null;\n        }\n        if (!menu.active && scene.ended()) {\n            menu.score(hero);\n        }\n    }\n\n    async function load() {\n        running = true;\n        let btn = $('#start');\n        btn.className = 'disabled';\n        btn.textContent = 'loading';\n        await SFX.init();\n        await Promise.all([\n            new SFX.Sound('custom', [5, 1, 0], 1).render('exp', [220,0], 1),\n            new SFX.Sound('custom', [3, 1, 0], 1).render('hit', [1760,0], .3),\n            new SFX.Sound('square', [.5, .1, 0], 1).render('power', [440,880,440,880,440,880,440,880], .3),\n            new SFX.Sound('triangle', [.5, .1, 0], 1).render('jump', [220,880], .3),\n            new SFX.Sound('square', [.2, .1, 0], .2).render('coin', [1760,1760], .2),\n            new SFX.Sound('custom', [.1, .5, 0], .3).render('move', [1760,440], .3),\n            SFX.render('music', [\n                new SFX.Channel(new SFX.Sound('sawtooth', [1, .3], .2), '8a2,8a2,8b2,8c3|8|8g2,8g2,8a2,8b2|8|8e2,8e2,8f2,8g2|4|8g2,8g2,8a2,8b2|4|'.repeat(4), 1),\n                new SFX.Channel(new SFX.Sound('sawtooth', [.5, .5], 1), '1a3,1g3,2e3,4b3,4c4,1a3c3e3,1g3b3d4,2e3g3b3,4d3g3b3,4g3c4e4|1|'+'8a3,8a3e4,8a3d4,8a3e4|2|8g3,8g3d4,8g3c4,8g3d4|2|8e3,8e3a3,8e3b3,8e3a3,4g3b3,4g3c4|1|'.repeat(2), 4)\n            ])\n        ]);\n        $('#load').className = 'hide';\n        update();\n    }\n\n    on(window, 'load', async () => {\n        hero.init();\n        gl.clearColor(0, 0, 0, 0);\n        gl.enable(gl.CULL_FACE);\n        gl.enable(gl.DEPTH_TEST);\n        camera.rotate.x = -.7;\n        camera.position.set(0, 0, 1.2);\n        hero.transform.rotate.set(10, 22, 30);\n        render(hero);\n        render(hero, .02);\n        (<HTMLLinkElement>$(\"link[rel=apple-touch-icon]\")).href = \n        (<HTMLLinkElement>$(\"link[rel=icon]\")).href = canvas.toDataURL();\n        camera.position.set(0, .5, 5);\n        resize();\n        bind();\n    });\n\n    $('ontouchstart' in window ? '#keys' : '#touch').className = 'hide';\n}"]}